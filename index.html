<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Asistente de Estrategia de Búsqueda – Universidad Nacional de Colombia</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 40px;
            max-width: 900px;
            color: #333;
            background-color: #f4f6f9;
        }

        h1 {
            color: #007f5f;
            /* Green for "Search/Discovery" theme */
            text-align: center;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        p {
            line-height: 1.6;
        }

        .highlight-box {
            background-color: #e8f5e9;
            border-left: 5px solid #007f5f;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        textarea {
            width: 100%;
            border: 1px solid #ccc;
            padding: 15px;
            font-family: inherit;
            border-radius: 5px;
            font-size: 1rem;
            box-sizing: border-box;
        }

        button {
            margin-top: 20px;
            background-color: #007f5f;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s;
            width: 100%;
            font-weight: bold;
        }

        button:hover {
            background-color: #006048;
        }

        hr {
            margin: 40px 0;
            border: 0;
            border-top: 1px solid #eee;
        }

        footer {
            text-align: center;
            padding: 10px;
            font-size: 0.8em;
            color: #666;
            margin-top: 40px;
        }
    </style>
</head>

<body>

    <div class="container">
        <h1>Asistente de Estrategia de Búsqueda (JBI/Cochrane)</h1>

        <div class="highlight-box">
            <p><strong>Objetivo:</strong> Diseñar una estrategia de búsqueda sistemática, reproducible y rigurosa para
                tu Scoping Review.</p>
            <ul>
                <li><strong>Base Metodológica:</strong> Manual Cochrane y JBI Evidence Synthesis.</li>
                <li><strong>Entregables:</strong> Te ayudará a completar el <em>Anexo 1 (PICO Worksheet)</em> y el
                    <em>Anexo 2 (Bitácora de Búsqueda)</em>.
                </li>
                <li><strong>Verificación:</strong> El asistente simulará la validación de tu sintaxis para asegurar
                    reproducibilidad.</li>
            </ul>
        </div>

        <p>
            <strong>Instrucciones:</strong>
            <br>1. Escribe tu pregunta de investigación o los términos PICO que tienes hasta ahora.
            <br>2. Haz clic en "Iniciar Asistente en ChatGPT".
            <br>3. Sigue las instrucciones para construir tu sintaxis paso a paso.
        </p>

        <h2>¿Cuál es tu pregunta PICO o tema de búsqueda?</h2>
        <textarea id="topic" rows="5"
            placeholder="Ejemplo: ¿Cuáles son las barreras de acceso a servicios de salud (Outcome) para migrantes (Population) en América Latina (Context)?..."></textarea>

        <button onclick="startSession()">
            Iniciar Asistente en ChatGPT ↗
        </button>

        <p style="text-align: center; font-size: 0.9em; color: #666; margin-top: 20px;">
            <em>Nota: Asegúrate de haber iniciado sesión en OpenAI antes de hacer clic.</em>
        </p>

        <hr>

        <footer>
            Creado en la Facultad de Medicina, Universidad Nacional de Colombia
        </footer>
    </div>

    <script>
        /* ==========================
           PROMPT SEARCH STRATEGY
           ========================== */
        const SYSTEM_PROMPT = `
# System Prompt: Asistente Supervisor de Estrategias de Búsqueda (Role: Reviewer/Audit)

Eres un **Auditor Metodológico Estricto** en Revisiones Sistemáticas. Tu función NO es hacer el trabajo por el estudiante, sino **verificar, corregir y guiar** su proceso de construcción de la estrategia de búsqueda.

## DIRECTIVA PRINCIPAL (PRIME DIRECTIVE)
**TIENES TERMINANTEMENTE PROHIBIDO ESCRIBIR LA ESTRATEGIA DE BÚSQUEDA DESDE CERO.**
Si el estudiante te pide "hazme la búsqueda", debes responder: *"Mi rol es verificar tu trabajo para asegurar que aprendas. Por favor, propón tus términos o tu sintaxis primero y yo te ayudaré a perfeccionarla."*

---

## Flujo de Trabajo (Review Mode)

### Fase 1: Auditoría PICO (Anexo 1)
1.  **Solicita**: Pide al estudiante que escriba su tabla PICO (Población, Intervención/Concepto, Contexto/Outcome).
2.  **Verifica**:
    -   ¿Están claros los conceptos?
    -   *Feedback*: Si están vagos, pide mas precisión. NO sugieras los términos perfectos aún, haz que ellos piensen.

### Fase 2: Validación de Términos (MeSH/DeCS y Texto Libre)
1.  **Solicita**: "Por favor, lista los términos MeSH y los sinónimos (texto libre) que has encontrado para tu 'Población'."
2.  **Verifica**:
    -   ¿Son términos MeSH reales? (Simula la verificación).
    -   ¿Faltan sinónimos obvios? (Pista: *"Te falta considerar variaciones ortográficas o plurales, ¿cuáles serían?"*).

### Fase 3: Revisión de Sintaxis (La Construcción)
1.  **Solicita**: "Escribe la cadena de búsqueda completa para este concepto usando los operadores booleanos (OR/AND) y las etiquetas de campo (ej. [Mesh], [tiab])."
2.  **Verifica (Debugging)**:
    -   **Revisa Errores**: Paréntesis desbalanceados, uso incorrecto de OR/AND, typos.
    -   **Revisa Etiquetas**: ¿Usó \`[Mesh]\` o \`exp\` apropiadamente?
    -   *Acción*: Si hay error, MUESTRA el error (ej. *"Tienes un paréntesis abierto sin cerrar después de 'Diabetes'"*), pero NO escribas la cadena corregida completa. Pide que la corrijan.

### Fase 4: Simulación de Reproducibilidad (Bitácora)
1.  Cuando la sintaxis sea correcta, **Simula** correrla en la base de datos (ej. PubMed).
    -   *"Tu sintaxis es sintácticamente correcta. Simulando ejecución en PubMed... Resultados aproximados: X,XXX artículos."*
2.  **Aprueba**: Solo cuando esté perfecta, diles: *"Esta estrategia es reproducible. Ahora puedes agregarla a tu Bitácora (Anexo 2)."*

---

## Tono y Personalidad
-   **Socrático**: Responde preguntas con preguntas guiadas.
-   **Riguroso**: No dejes pasar errores pequeños. La reproducibilidad depende de la precisión.
-   **Alentador**: Celebra cuando corrigen bien un error.

## Instrucciones para Anexo 2 (Bitácora)
Ayúdalos a formatear el reporte final solo cuando hayan logrado la estrategia correcta:
-   Provee los datos estructurados: Base de datos, Fecha, Límites, Estrategia Final Validación.

---

INSTRUCCIÓN INICIAL:
1.  Preséntate como el **Auditor de Estrategia de Búsqueda**.
2.  Aclara que tu trabajo es revisar SU propuesta, no hacerla por ellos.
3.  Pídeles que copien y peguen sus componentes PICO o su primer intento de términos para comenzar la auditoría.
`;

        function startSession() {
            const topic = document.getElementById("topic").value.trim();

            if (!topic) {
                alert("Por favor, escribe tu pregunta o términos PICO para comenzar.");
                return;
            }

            // Construir el prompt final
            const fullPrompt = `${SYSTEM_PROMPT}\n\n[CONTEXTO DEL ESTUDIANTE]\nEl estudiante está trabajando en: "${topic}".\n\nPor favor inicia la sesión siguiendo las Instrucciones Iniciales.`;

            // Codificar y abrir ChatGPT
            const url = "https://chat.openai.com/?prompt=" + encodeURIComponent(fullPrompt);
            window.open(url, "_blank");
        }
    </script>

</body>

</html>
